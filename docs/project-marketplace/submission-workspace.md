# 项目上架工作台（Project Submission Workspace）

> 目标：让机构和导师像填表单一样轻松完成项目上架，同时保证信息完整、资质真实、可以快速进入审核流程。

## 1. 模块定位与价值
- **平台侧**：把分散的项目资料收集成标准化结构，方便审核、统计、后续服务交付。
- **提交者侧（机构/导师）**：提供分步引导、草稿保存和实时校验，降低准备材料的难度。
- **配合其他模块**：审核后台直接读取结构化内容，项目大厅得到统一格式的展示数据。

## 2. 使用角色与场景
- **机构管理员**：批量上架自家项目（如“英国硕士申请旗舰包”），维护价格与退费策略。
- **导师个人**：发布小班课程或专项项目（如“德语 A1 保过营”）。
- **运营助理**：帮助合作伙伴录入资料，承担第一轮格式检查。

场景示例：
1. 新合作机构签约 → 机构管理员登录上架工具 → 上传资质 → 提交审核。
2. 老项目每季度调价 → 导师在“版本管理”中复制旧内容 → 更新价格 → 提交更新审核。
3. 运营助理接到纸质资料 → 通过“协助上架”模式完成录入，再邀请机构确认。

## 3. 功能结构
```
项目上架工作台
├─ 项目概览面板（进度、状态、历史版本）
├─ 分步表单
│  ├ 基础信息（名称、国家、招生季、简介）
│  ├ 服务亮点（优势、导师阵容、成功案例）
│  ├ 套餐与价格（多套餐、货币、退费规则）
│  ├ 服务流程（阶段描述、时间轴）
│  ├ 所需资料（学生条件、材料清单）
│  ├ 风险与保障（免责声明、售后策略）
│  └ 资质文件（营业执照、合同样本、导师证明）
├─ 草稿与版本管理
├─ 协作留言与任务提醒
└─ 提交审核 & 状态追踪
```

## 4. 关键流程
```
开始 → 选择“新建项目” → 填写基础信息 → 保存草稿
   ↓                                ↑
补充亮点/套餐/流程 → 系统校验缺失字段 → 通过校验 → 提交审核
   ↓                                                      ↑
上传资质文件 → 生成提交记录 → 审核结果回写 → 若打回则进入“待修改”
```

补充说明（适合初中生理解）：
- 可以想象是在做一份“项目说明书”，系统会提醒缺了什么内容。
- 提交流程像交作业：先写完、再自检、最后交给老师（审核员）。

## 5. 表单字段设计（核心字段）

| 步骤 | 字段 | 类型 | 说明 |
|------|------|------|------|
| 基础信息 | 项目名称 | Text | 30 字内，建议包含国家/阶段（例：英国硕士申请旗舰包） |
|  | 国家/地区 | Select | 绑定 `service_types.country` 枚举 |
|  | 适用阶段 | Multi-Select | 本科 / 硕士 / 博士 / 交换 / 语言强化 |
|  | 招生季 | Multi-Select | Spring / Fall / Rolling |
|  | 项目简介 | Rich Text | 支持 500 字以内 |
| 服务亮点 | 核心优势 | Tag List | 每条 ≤ 50 字，最多 6 条 |
|  | 导师阵容 | Reference | 关联已认证导师资料 |
|  | 成功案例 | Structured | {年份, 学生背景, 结果, 亮点} |
| 套餐与价格 | 套餐列表 | Repeater | {名称, 价格区间, 币种, 服务项, 课时/阶段数, 座位数} |
|  | 退费规则 | Rich Text | 标准模板 + 自定义补充 |
| 服务流程 | 时间轴节点 | Repeater | {阶段名称, 时长, 输出物, 验收标准} |
| 所需资料 | 条件列表 | Checklist | 学术/语言成绩、背景要求 |
| 风险与保障 | 风险提示 | Text | 系统提供示例，提交者必须确认 |
| 资质文件 | 文件上传 | File | 支持 PDF、图片，需填写有效期 |

校验策略：
- 必填项缺失 → 即时提示并禁止提交。
- 价格与币种 → 支持区间或固定值，自动换算为标准货币便于比较。
- 文件上传 → 要求命名规范，支持 OCR 提取关键信息辅助审核。

## 6. 状态机与权限
| 状态 | 描述 | 可见角色 | 下一步动作 |
|------|------|----------|------------|
| 草稿 | 仅本人或被授权协作者可见 | 提交者、协作人 | 编辑、删除、提交审核 |
| 待审核 | 已提交但未被审核 | 提交者、审核员 | 审核员可审核；提交者可撤回 |
| 审核中 | 审核员领取处理中 | 审核员、运营经理 | 审核员完成后进入“通过/打回” |
| 审核打回 | 审核未通过，需修改 | 提交者、审核员 | 提交者修正后重新提交 |
| 已上线 | 通过审核并在市场展示 | 所有角色 | 提交者可发起更新，审核员可下线 |
| 下线 | 主动下架或违规下架 | 提交者、审核员 | 可申请重新上架（需再次审核） |

权限要点：
- **提交者**：草稿/撤回/更新。
- **协作人**：编辑草稿但不能提交。
- **审核员**：只读草稿、审核待审项目。
- **运营经理**：可强制下架、指派审核员。

## 7. 协作与通知机制
- 草稿分享：提交者可邀请同事填写，操作历史保留。
- 审核意见：系统发送站内信 + 邮件，意见分段落定位到字段。
- 版本对比：提交者查看“本次修改 vs 上线版本”，方便快速调整。
- 提醒策略：草稿 7 天未更新发送提醒；审核打回后 48 小时未处理再次提醒。

## 8. 集成点
- **Supabase**：所有表单结果写入 `project_market_item` 等表。
- **文件存储**：调用 Supabase Storage，按照机构 ID + 项目 ID 分桶。
- **CRM**：项目上线后自动生成“项目产品”记录，关联报价系统。
- **导师库**：选择导师时直接搜索 `mentor_profiles`。
- **日志系统**：记录关键操作（提交、撤回、版本发布）。

## 9. 数据埋点与监控
- 填写完成率（每步停留人数 / 退出率）。
- 平均上架时长（首次创建到提交审核）。
- 打回原因统计（缺资料/资质问题/描述不清等）。
- 文件上传失败率、重复提交次数。
- 草稿滞留超过 14 天的数量。

监控规则（告警）：
- 单日提交量激增（可能批量导入） → 提醒审核团队调配人力。
- 退回率 > 50% → 提醒运营检查模板或培训机构。

## 10. KPI 指标
1. 草稿→提交审核转化率 ≥ 70%。
2. 审核一次通过率 ≥ 60%，逐步提升。
3. 平均提交准备时间 ≤ 3 天。
4. 打回平均响应时间 ≤ 48 小时。

## 11. 迭代路线
| 阶段 | 可交付物 | 重点 |
|------|----------|------|
| MVP | 分步表单 + 草稿 + 提交 | 覆盖机构管理员，支持核心字段 |
| V1.1 | 版本管理 + 协作 + 模板库 | 支持复制旧版本、邀请协作者 |
| V1.2 | 智能校验 + OCR 抽取 | 自动检查资质有效期、文本质量 |
| V1.3 | API 导入 + 批量上传 | 面向大型机构批量同步项目 |

---

如需下一步原型图或 API 契约，可在此文档的结构基础上继续细化。

