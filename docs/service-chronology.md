# 服务进度中心（Service Progress Center）设计文档

## 1. 模块定位与目标

- **所属导航**：`Starfleet Academy / Service Chronology`
- **角色覆盖**：顾问、文书老师、学生、导师、运营经理。
- **核心目标**：
  - 用时间线视角串联学生服务项目的关键里程碑、进度记录与风险提示。
  - 打通应用工作台、项目任务、网申进度等模块，实现数据联动。
  - 提供多维可视化（时间线、进度仪表、风险雷达），便于团队协同与决策。

## 2. 顶层信息架构

```
服务进度中心
├─ 项目概览（Project Overview）
├─ 时间线视图（Chronology Timeline）
├─ 里程碑管理（Milestone Control）
├─ 风险雷达（Risk Radar）
├─ 进度统计（Progress Analytics）
└─ 服务档案（Service Archives）
```

### 2.1 项目概览（Project Overview）
- 展示当前学生的服务列表、状态、负责人、阶段、整体完成度。
- 关键指标：总里程碑数、完成率、风险项、材料/文书完成率等。
- 提供切换学生/项目的导航面板（支持搜索、按状态筛选）。

### 2.2 时间线视图（Chronology Timeline）
- 纵向时间线：展示服务阶段、里程碑、任务节点、材料/文书更新、学生反馈等事件。
- 支持按类型过滤（里程碑、任务、材料、文书、网申、质检、沟通）。
- 每个节点可展开详情（描述、责任人、相关附件、评论、AI 建议）。

### 2.3 里程碑管理（Milestone Control）
- 里程碑定义：名称、阶段、预计完成时间、责任人、验收标准、影响范围。
- 里程碑层级：`阶段 → 子阶段 → 里程碑 → 子任务`，支持模板化。
- 互动能力：
  - 新建/编辑/归档里程碑。
  - 关联任务、材料、文书、网申阶段。
  - 设置预警（提前 X 天提醒；未完成触发风险）。

### 2.4 风险雷达（Risk Radar）
- 风险维度：材料、文书、网申、学生配合、外部因素、财务、其它。
- 风险评分：每项 0-100，动态计算（逾期、退回、缺项、负面反馈等）。
- 输出建议：
  - 自动生成风险提示、建议动作。
  - 显示风险趋势（最近一周/一月变动）。

### 2.5 进度统计（Progress Analytics）
- 数据视图：阶段完成率、任务完成度、文书版本迭代次数、材料通过率、AI 建议采纳率等。
- 支持时间维度、项目维度对比（单人/多人）。
- 导出进度报告（PDF/Excel），可配置模板。

### 2.6 服务档案（Service Archives）
- 汇总服务历程：时间轴、输出成果、文件附件、沟通纪要。
- 支持一键生成服务总结报告，方便交接或复盘。
- 提供“高光时刻”（亮点）与“改进建议”记录区。

## 3. 核心流程

1. **项目初始化**：从模板生成里程碑与关键节点 → 指派责任人 → 配置预警。
2. **进度更新**：顾问/文书在完成里程碑或任务后填写记录 → 上传附件 → 自动推送时间线。
3. **风险监控**：系统定期扫描逾期、退回、学生反馈等 → 更新风险雷达 → 触发提醒。
4. **汇报导出**：月度/阶段结束时生成进度报告 → 归档于服务档案。
5. **复盘与总结**：项目完成后汇总亮点、难点、AI 建议采纳情况，供未来参考。

## 4. 数据模型（简化）

```
student_service
   └─ service_milestone
        ├─ milestone_progress (时间线记录)
        ├─ milestone_task_link (任务关联)
        ├─ milestone_document_link (文书关联)
        └─ milestone_risk (风险记录)
```

- `service_milestone`: id, service_id, title, type, planned_date, due_date, status, responsible_id, template_id, weight。
- `milestone_progress`: milestone_id, record_type(更新/验收/风险/反馈), description, created_by, created_at, attachments(json), ai_summary。
- `milestone_risk`: milestone_id, risk_type, severity, score, description, mitigation, detected_at, resolved_at。

## 5. API 参考

- `GET /service-progress/:serviceId/overview`：获取项目概览数据。
- `GET /service-progress/:serviceId/timeline`：返回时间线节点，支持过滤。
- `POST /service-progress/:serviceId/milestones`：新增里程碑。
- `PATCH /service-progress/milestones/:milestoneId`：更新状态/负责人/时间。
- `POST /service-progress/milestones/:milestoneId/progress`：添加进度记录。
- `GET /service-progress/:serviceId/risks`：返回风险雷达数据。
- `GET /service-progress/:serviceId/report`：导出进度报告。

## 6. 界面线框（文本）

```
┌──────────────────────────────────────────────┐
│ 左侧：项目切换列表                            │
│ ├ 学生头像 + 服务名称 + 状态 + 启止时间       │
│ └ 搜索、筛选（状态、阶段）                    │
├──────────────────────────────────────────────┤
│ 右侧主面板                                    │
│ ┌ 项目概览卡片（完成率、风险、材料/文书状态） │
│ ├ Tab：时间线 | 里程碑 | 风险 | 统计 | 档案     │
│ │ 时间线：纵向节点，展示事件、责任人、AI 提示 │
│ │ 里程碑：列表 + 甘特视图                     │
│ │ 风险雷达：雷达图 + 风险列表 + 行动建议      │
│ │ 统计：环图/柱状图/折线图                   │
│ │ 档案：关键成果、附件、沟通摘要             │
└──────────────────────────────────────────────┘
```

## 7. 交互与体验

- **时间线节点**：
  - 支持拖拽调整时间、快速记录（快捷键如 `N` 新建记录）。
  - 多人同时编辑时提示协作者在线状态。
  - AI 一键总结里程碑进展或学生反馈。
- **风险雷达**：
  - 点击风险点展开详情、历史趋势。
  - 提供“立即创建任务”按钮，将风险转化为跟进任务。
- **里程碑甘特图**：
  - 支持缩放（周/月视图）、拖拽调整、显示依赖关系。
  - 标记关键路径里程碑，提醒跨团队协作。
- **进度统计**：
  - 图表支持导出与分享，可嵌入控制台或进度报告。
- **服务档案**：
  - 支持拆分为阶段报告、自动生成 PDF。
  - 可手动添加“高光/改进”标签，形成知识沉淀。

## 8. 自动化规则示例

| 触发条件                              | 动作                                                         |
|---------------------------------------|--------------------------------------------------------------|
| 里程碑逾期                             | 发送提醒 + 风险雷达增加“进度延迟”项                         |
| 学生反馈评分 < 3                      | 时间线生成“学生情绪”记录 + 推送给顾问                       |
| 文书定稿                              | 时间线插入“文书完成”节点 + 自动更新里程碑状态               |
| 网申阶段完成                          | 自动勾选关联里程碑并触发下一阶段任务                        |
| 风险连续两周未降低                    | 提醒运营经理介入，建议召开复盘会议                          |

## 9. KPI 与评估

- 里程碑准时完成率 ≥ 90%。
- 进度更新平均周期 ≤ 48h。
- 风险发现到处理平均时长连续下降。
- 学生满意度（进度透明度）提升。
- 档案生成率（每次服务都完成归档）≥ 95%。

## 10. 迭代路线

1. **MVP**：时间线 + 里程碑列表 + 风险雷达 + 简单统计。
2. **自动化增强**：接入任务、文书、材料状态驱动自动节点与风险。
3. **报告与档案**：上线报告模板、档案输出、亮点沉淀。
4. **智能分析**：AI 风险预测、关键路径识别、进度对比分析。
5. **多项目对比**：支持横向对比多个学生的服务进度，寻找模式与最佳实践。

---

如需进一步输出高保真原型、接口契约或数据库迁移脚本，可在此文档基础上继续扩展。

