# 选校规划中心（School Selection Planner）设计文档

## 1. 模块定位与目标

- **所属导航**：`Starfleet Academy / School Selection Planner`
- **用户角色**：首席顾问、资深顾问、文书老师、行政支持、学生本人（受控访问）。
- **核心目标**：
  - 提供 AI 辅助、人工筛选、实时协同的全流程选校规划体验。
  - 支持团队与学生在统一工作台上审视候选项目、调整策略、记录决策。
  - 梳理历史案例与数据库，生成个性化推荐并可持续迭代。

## 2. 信息架构

```
选校规划中心
├─ 顶部导航条
│  ├ 学生信息概览
│  ├ 当前申请策略标签
│  └ 快捷操作（生成方案 / 安排会议 / 导出方案）
├─ AI 智能选校
│  ├ 背景摘要与可调权重
│  ├ 推荐院校列表（分层 A/B/C 档）
│  ├ 相似案例与结果对比
│  └ 版本管理（记录每次生成结果）
├─ 人工筛选工作台
│  ├ 院校库快速检索
│  ├ 筛选器（国家、专业、排名、语言要求、费用等）
│  ├ 候选池（临时收藏、标签管理）
│  └ 批量操作（批注、对比、共享）
├─ 协同会议区
│  ├ 学生协同视图（互动式看板 / 投票）
│  ├ 顾问协同视图（实时讨论、任务分派）
│  └ 会议纪要与行动项
├─ 决策档案
│  ├ 方案版本快照
│  ├ 决策记录（谁 / 何时 / 调整内容）
│  └ 导出 / 分享（PDF、幻灯片、在线链接）
```

## 3. 核心功能设计

### 3.1 AI 智能选校
- **输入维度**：
  - 学生背景（GPA、标化成绩、院校背景、实习科研、语言、个人特点）。
  - 申请偏好（国家、专业方向、预算、学习期限、奖学金需求）。
  - 风险偏好（冲刺 / 匹配 / 保底比例）。
- **输出结构**：
  - 推荐列表按档位分组，每所院校给出匹配度评分、理由、需补充材料提示。
  - 关联相似案例：展示以往成功 / 失败案例的学生画像、最终结果、关键差异。
  - 生成过程支持权重调节，允许顾问手动微调权重后重新生成。
- **版本控制**：保存生成历史，便于回溯；从旧版本复制到当前方案继续编辑。
- **人工反馈闭环**：顾问可对推荐结果打标签（采用 / 待讨论 / 不适合），AI 可学习反馈。

### 3.2 人工选校
- **浏览模式**：
  - 卡片视图：突出学校/专业核心指标（排名、语言、费用、特色项目）。
  - 表格视图：支持列排序、批量勾选。
  - 对比视图：最多 5 个项目，展示核心指标对比矩阵。
- **筛选器**：组件化设计，支持保存筛选方案；高级筛选可按案例成功率、签证通过率等维度。
- **候选池**：
  - 拖拽添加候选项目至 A/B/C 档或自定义清单。
  - 给每个项目添加备注、@同事提醒、上传补充材料链接。
  - 支持批量导出候选池或推送给学生查看。

### 3.3 学生协同会议
- **会议准备**：
  - 生成会议议程，自动整理需要讨论的候选项目、关键差异。
  - 提供互动链接，学生可实时看到顾问展示的候选集。
- **会议中互动**：
  - 顾问可切换“展示模式”，限制学生操作，仅允许投票和评论。
  - 投票组件：学生对每个项目打分或选择心动程度，结果实时更新。
  - 即时记录疑问与待补充材料。
- **会后沉淀**：
  - 自动生成会议纪要、决策记录。
  - 将选定项目同步到学生服务进度及文书工作台。

### 3.4 顾问协作会议
- **多人编辑**：
  - 同步编辑会标记操作者身份，避免冲突。
  - 支持语音会议嵌入或外部链接（Zoom/Teams）记录。
- **任务派发**：
  - 在协作区直接创建任务（如补充学校背景调研），关联项目与负责人。
  - 任务状态同步到项目任务面板。
- **知识沉淀**：
  - 可将确定的选校策略存入知识库，形成模板供其他团队复用。

## 4. 数据模型（草案）

### 4.1 主要实体
- `StudentProfile`：核心背景、偏好、目标档位配置。
- `SelectionScenario`：一次选校规划会话的上下文（状态：草稿 / 讨论中 / 已确认）。
- `AIRecommendation`：AI 输出结果（含版本号、使用的参数、生成时间）。
- `CandidateProgram`：候选院校/项目记录，包含来源（AI/人工）、状态标签、备注。
- `MeetingNote`：会议纪要、行动项、参会者。
- `CollaborationTask`：协同会议产生的任务，与任务系统关联。

### 4.2 关联关系
- `SelectionScenario` 关联一个 `StudentProfile`。
- 一个 `SelectionScenario` 下存在多个 `AIRecommendation` 版本。
- `CandidateProgram` 可关联多个 `SelectionScenario`（用于复用候选池）。
- `MeetingNote`、`CollaborationTask` 关联 `SelectionScenario` 与具体 `CandidateProgram`。

## 5. API 草案

| 功能 | Method | Endpoint | 说明 |
|------|--------|----------|------|
| 获取选校场景列表 | GET | `/api/school-selection/scenarios` | 支持按学生、状态筛选 |
| 创建/更新场景 | POST / PATCH | `/api/school-selection/scenarios` | 新建/编辑选校规划主档 |
| 生成 AI 推荐 | POST | `/api/school-selection/recommendations` | body 含学生背景、权重参数 |
| 获取推荐版本 | GET | `/api/school-selection/recommendations/:scenarioId` | 列出历史版本 |
| 添加候选项目 | POST | `/api/school-selection/candidates` | 支持批量，来源字段标记 |
| 更新候选状态 | PATCH | `/api/school-selection/candidates/:id` | 更新标签、档位、备注 |
| 会议安排记录 | POST | `/api/school-selection/meetings` | 创建学生/顾问会议，并回写日历 |
| 保存会议纪要 | POST | `/api/school-selection/meeting-notes` | 记录讨论结果与行动项 |
| 导出方案 | POST | `/api/school-selection/export` | 返回 PDF / PPT / Link |

## 6. 关键流程

### 6.1 AI 生成 + 人工调整流程
1. 顾问进入学生的选校规划场景，确认背景信息完整。
2. 设置偏好权重（可使用模板）后触发 AI 生成。
3. 评估推荐列表，对不合适项目标记“剔除”，并写下理由。
4. 将部分项目拖入候选池，为后续讨论做准备。
5. 若需要再次生成，调整权重或增补背景信息，保留版本号。

### 6.2 学生会议流程
1. 顾问创建会议，选择呈现的候选集并生成分享链接。
2. 会议过程中，顾问控制页面，学生通过投票/评论表达意向。
3. 会议结束时，顾问选择“生成纪要”，系统汇总讨论结果和行动项。
4. 确认的院校同步到服务进度中心；需准备文书的项目推送到工作台。

### 6.3 顾问协作流程
1. 多名顾问同时进入协同视图，使用实时注释、@提醒功能讨论候选项目。
2. 对每个争议项目创建任务或调查请求，分配负责人。
3. 完成讨论后，生成“顾问会商版方案”，标记待学生确认事项。

## 7. 权限与角色

- **首席顾问**：读写所有选校场景，可发布最终方案。
- **资深顾问**：可创建场景、生成 AI 推荐、编辑候选池。
- **文书老师**：只读候选池，关注文书准备要求，可添加文书清单任务。
- **行政支持**：安排会议、导出方案、维护学生背景数据。
- **学生**：仅在获授权的会议链接中查看或投票，无法编辑候选池。

## 8. UI / UX 建议

- 主界面采用分栏布局：左侧为学生与场景信息，中间为候选列表，右侧为智能推荐/协作面板。
- 区分 AI 生成与人工添加项目的视觉样式（如标签颜色）。
- 会议模式使用全屏展示，保留实时聊天与投票侧边栏。
- 操作记录采用时间轴呈现，便于回溯。
- 暗色模式需保证表格、候选卡片的对比度与可读性。

## 9. 埋点与指标

- AI 推荐的生成次数、采纳率、平均调节次数。
- 候选项目的来源占比、最终录取率。
- 会议互动数据：参会人数、投票提交率、会议时长。
- 导出去向（PDF、链接）的使用频次。
- 顾问协作任务的完成率与平均完成时间。

## 10. 迭代计划

1. **MVP**：AI 推荐 v1（基于规则 + 相似案例）、人工筛选、候选池、学生会议只读模式、方案导出。
2. **阶段二**：实时协作、投票互动、任务联动、AI 学习反馈。
3. **阶段三**：全量数据接入、知识库模板沉淀、自动生成会议纪要。
4. **阶段四**：跨学生方案对比、数据分析仪表盘、AI 智能提醒。

---

如需进一步输出原型稿、API 契约或数据结构定义，可在本设计基础上继续深化。
