 # 知识库 / 知识花园 前端信息架构与页面规划

> 目标：在管理端与门户端实现“个人空间 → 团队空间 → 知识花园”三层体系，遵循多级页面结构，避免“一页塞完”。本文定义路由层级、页面职责、关键组件与示例交互，确保后续开发落地。

## 1. 顶层导航与入口
| 端 | 一级导航 | 描述 |
| --- | --- | --- |
| 管理端 Admin | `知识中心`（Knowledge Hub） | 管理者、顾问、运营登陆后进入，包含个人/团队管理、审核、数据分析等能力 |
| 门户端 Portal（可选） | `知识花园` | 面向学生与 B 端合作伙伴的对外入口，支持浏览、购买、学习 |

> 若沿用现有左侧导航，可在 Admin 端新增 `知识中心`，下挂多级菜单；Portal 端提供独立路由并与登录态联动。

## 2. 管理端路由结构
```
/admin/knowledge
├─ dashboard                （知识概览与快捷入口）
├─ my-space                 （个人空间首页）
│  ├─ drafts                （草稿箱）
│  ├─ published             （我发布的内容）
│  └─ submissions           （审核中的申请）
├─ team-space               （团队空间列表）
│  ├─ :teamId/overview      （团队总览）
│  ├─ :teamId/catalog       （目录树 / 文档列表）
│  ├─ :teamId/doc/:docId    （团队文档详情 & 协同）
│  └─ :teamId/settings      （权限、成员、默认标签）
├─ garden                   （知识花园运营）
│  ├─ marketplace           （上架内容列表 + 状态）
│  ├─ submissions           （花园审核队列）
│  ├─ bundles               （课程包 / 专题管理）
│  ├─ pricing               （定价 & 优惠配置）
│  └─ analytics             （收益、转化、互动数据）
├─ moderation               （全局审核日志）
└─ settings                 （标签、分类、受众策略）
```

### 2.1 Dashboard（知识概览）
- 内容生产概览：文档产出、审核待处理、收益趋势。
- 快捷入口：新建文档、提交审核、创建专题、查看模板。
- 推荐任务：即将到期的文档、热度下降内容、评论待回复。

### 2.2 My Space（个人空间）
- **MySpaceLayout**：顶部展示个人贡献、积分、草稿数量。
- **DraftsPage**：列表 + 一键继续编辑、提交团队/花园。
- **PublishedPage**：按状态（团队共享/花园上线/下线）过滤；支持复制、拆分版本。
- **SubmissionsPage**：显示审核流程、审批人、备注；允许撤回或补充材料。

### 2.3 Team Space（团队空间）
- **TeamListPage**：展示用户所在团队、可申请加入的团队，带搜索与标签。
- **TeamOverview**：包含团队目标、热门文档、活跃创作者排行榜。
- **CatalogPage**：左侧目录树（分类/标签），右侧卡片列表；支持批量操作、钉选。
- **DocumentDetail**：富文本阅读 + 评论协作 + 版本对比 + 权限标识。
- **TeamSettings**：目录维护、默认标签、对外发布策略、审批流程配置。

### 2.4 Garden（知识花园运营后台）
- **MarketplacePage**：表格视图 + 状态过滤（草稿、待上架、已上架、下架）。
- **SubmissionQueue**：审核详情页包含内容预览、受众标签、定价信息、审核记录。
- **BundlesPage**：组合课程/专题；支持添加文档、设置学习路径、同步 Portal 展示位。
- **PricingCenter**：定价策略、优惠券、促销活动，提供模拟收益计算。
- **AnalyticsPage**：收益、付费转化、受众分布、热度榜等图表。

### 2.5 Moderation & Settings
- **ModerationPage**：所有审核与违规处理的日志、状态、操作者。
- **SettingsPage**：标签管理、分类树维护、受众标签（学生/顾问/B 端）、敏感级别配置。

## 3. 门户端（Portal）路由结构
```
/knowledge-garden
├─ home                     （首页：推荐、榜单、专题）
├─ catalog                  （分类/标签浏览）
│  └─ :slug                 （分类详情）
├─ search                   （搜索结果页）
├─ doc/:docId               （文档详情：摘要、权限、购买入口）
├─ bundle/:bundleId         （课程包/专题页）
├─ auth/wallet              （账户与购买记录）
├─ dashboard                （学习仪表盘：关注内容、进度、证书）
└─ org/:orgId               （企业/学校专属页面，可选）
```

### 3.1 首页（Home）
- Banner：专题活动、限时优惠。
- 个性化推荐：基于受众标签、浏览历史。
- 分角色入口：`学生专区`、`顾问专区`、`合作伙伴专区`。

### 3.2 分类与搜索
- 分类页：左侧分类树，右侧内容卡片（标注免费/付费/订阅）。
- 搜索页：支持过滤（价格、类型、时长、受众、评分）；提供语义推荐和“猜你想要”。

### 3.3 文档详情
- 上半部分：标题、作者、标签、受众提示、内容摘要、试看片段、评分。
- 访问区域：根据权限显示“立即阅读”“购买”“申请授权”。
- 下半部分：章节目录、相关文档、评价/问答。

### 3.4 学习仪表盘（Dashboard）
- 我的购买、订阅、关注列表。
- 学习进度、考试/作业入口、证书下载。
- 对学生开放的班级/社群链接；对 B 端提供专属培训入口。

## 4. 组件与数据结构建议
- **共享组件**：
  - `KnowledgeCard`（标题、标签、受众标识、价格）
  - `AudienceBadge`（学生/顾问/B 端/内部）
  - `PricingTag`（免费、付费、订阅、企业授权）
  - `ApprovalTimeline`（审核记录）
  - `VersionDiffViewer`

- **状态管理**：
  - 采用 React Query / Zustand 管理知识库数据，区分个人/团队/花园域。
  - 搜索和推荐可封装 Hooks，支持分页与无限滚动。

- **API 网关**：
  - 通过 `@/api/knowledge` 模块抽象，包含 `getMyDocuments`, `submitForTeam`, `publishToGarden`, `getGardenList`, `purchaseContent`, `getAnalytics` 等接口。

## 5. 权限与路由守卫
- 使用 `PrivateRoute` 扩展，根据用户角色控制：
  - 普通顾问：可访问 My Space、加入团队、申请花园发布。
  - 团队管理员：可访问团队设置、审批入口。
  - 花园运营者：可访问 Marketplace、Pricing、Analytics。
- Portal 端根据身份动态展示：学生仅访问公开/学生内容；内部员工拥有更广权限。

## 6. 开发里程碑建议
1. **Sprint 1**：Admin 端 My Space + Team Space 基础（列表、详情、提交流程）。
2. **Sprint 2**：Garden Marketplace + 审核流程；Portal 首页 & 分类浏览。
3. **Sprint 3**：购买/访问控制、Bundles/专题、Analytics 初版。
4. **Sprint 4**：学习仪表盘、社群/互动、企业专属页面。
5. **Sprint 5**：AI 辅助创作、知识图谱推荐、付费活动运营工具。

## 7. 设计规范提示
- 保持导航与现有蓝色体系一致；内容卡片可根据类型配置渐变或图标。
- 采用响应式布局：桌面端左右分栏，移动端折叠。（Portal 尤其重要）
- 明确受众提示：在卡片和详情页突出“仅对顾问开放”“学生可见”等标签。
- 购买/授权流程使用多步对话框，结合支付/发票接口。

---
此规划可作为前端开发蓝图，后续如需原型图或组件库定义，可在该文档基础上扩展 UI 规格说明。