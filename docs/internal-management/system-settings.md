# 系统设置中心

## 1. 模块定位

系统设置中心负责整个平台的基础配置，包括站点信息、通知策略、第三方集成、数据备份等。通过统一的配置面板和变更记录，确保系统运行稳定、配置可追踪。

## 2. 主要使用人群

- **系统管理员 / DevOps**：维护环境变量、集成接口、日志与备份。
- **运营负责人**：配置通知模板、可见性规则、默认偏好。
- **客服 / 支持团队**：管理渠道账号、服务时间、自动回复等。

## 3. 核心功能

- **站点与品牌配置**：LOGO、主题色、登录页文案、对外联系方式。
- **通知策略**：定义邮件、短信、站内信模版与触发条件，支持 A/B 测试。
- **第三方集成**：配置 Supabase、支付、短信、企业微信等 API 密钥与状态监控。
- **数据维护**：数据库备份计划、恢复演练记录、日志留存时间设置。
- **系统开关**：按模块启停功能、设置新功能灰度范围、维护公告。

## 4. 数据结构与接口

| 表/实体 | 关键字段 | 说明 |
|---------|----------|------|
| `system_settings` | `key`, `value`, `category`, `updated_by` | 通用配置键值 |
| `notification_templates` | `id`, `channel`, `name`, `content`, `trigger_event` | 通知模版 |
| `integration_configs` | `id`, `vendor`, `config`, `status`, `last_health_check` | 第三方集成 |
| `maintenance_logs` | `id`, `type`, `operator_id`, `detail`, `created_at` | 维护与操作日志 |
| `feature_flags` | `id`, `module`, `flag`, `percentage`, `status` | 功能开关 |

支持通过管理 API 批量导入/导出配置；对关键字段变更需双重确认，并写入审计日志。

## 5. 典型业务流程

1. 运营提出修改入驻页面文案，系统管理员在“站点配置”编辑相应字段。
2. 变更自动生成预览，确认后提交，并记录操作日志。
3. 同时更新通知模板，设置与新文案关联的欢迎邮件。
4. 每周自动执行集成健康检查，若检测失败发送告警。
5. 月度备份执行后生成报告，保存在对象存储并记录在维护日志中。

## 6. 监控与安全

- **配置回滚**：为关键配置提供一键回滚到上一个版本的能力。
- **健康检查**：第三方集成状态异常立即通知管理员。
- **访问控制**：仅允许具备“系统管理员”角色的成员访问敏感菜单，关键操作需要二次确认。

## 7. 迭代建议

- 引入配置对比工具，支持在不同环境间比对差异。
- 为通知模板提供多语言版本管理功能。
- 打通日志平台，提供实时的系统状态仪表盘。

