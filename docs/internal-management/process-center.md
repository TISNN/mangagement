# 流程中心

## 1. 模块定位

流程中心用于沉淀机构的标准作业流程（SOP），覆盖招生、服务交付、财务审批、合规审查等场景。通过可配置的流程节点和版本管理，确保团队按照统一标准执行，并支持持续优化。

## 2. 主要使用人群

- **流程负责人 / 质控人员**：编写、发布、维护 SOP，收集执行反馈。
- **部门主管**：为团队指定适用流程，监控执行情况与异常节点。
- **一线顾问与老师**：按流程指引完成任务，提交数据和资料。

## 3. 核心功能

- **流程建模**：支持图形化节点编辑，定义阶段、表单、审批人、触发条件。
- **版本管理**：流程更新后保留历史版本，支持灰度发布与快速回滚。
- **任务触发**：当线索、学生、项目达到指定条件时自动生成流程任务。
- **表单与附件**：流程节点可配置表单控件、必填校验、附件上传。
- **复盘反馈**：执行完成后收集实际耗时、阻塞原因，生成流程优化报告。

## 4. 数据结构与接口

| 表/实体 | 关键字段 | 说明 |
|---------|----------|------|
| `workflow_definitions` | `id`, `name`, `version`, `status`, `scope` | 流程定义 |
| `workflow_nodes` | `workflow_id`, `node_id`, `type`, `config` | 节点配置（审批、任务、表单等） |
| `workflow_instances` | `id`, `workflow_id`, `target_type`, `target_id`, `status` | 流程实例，关联学生/线索/项目 |
| `workflow_tasks` | `instance_id`, `node_id`, `assignee_id`, `status`, `due_at` | 节点任务 |
| `workflow_feedbacks` | `instance_id`, `node_id`, `delay_reason`, `comment` | 执行反馈数据 |

接口需支持流程的创建、发布、触发、暂停及关闭，建议提供 Webhook 以便与外部系统联动。

## 5. 典型业务流程

1. 质控人员根据“文书初稿审阅”场景创建流程，定义节点：提交草稿 → 审核 → 修改 → 成果归档。
2. 发布后，文书任务一旦创建，对应学生自动触发流程实例。
3. 系统按节点顺序派发任务，支持提醒、逾期警告。
4. 若流程需调整，发布新版本并设定生效日期，旧实例继续使用旧版，新实例使用新版。
5. 执行完成后系统汇总耗时、异常，生成周报，供流程优化参考。

## 6. 监控与度量

- **执行看板**：按流程查看进行中、已完成、逾期数量及平均耗时。
- **瓶颈分析**：识别耗时最长节点、常见阻塞原因、返工次数。
- **合规校验**：关键节点（例如合同签署）可配置不可跳过限制，保证合规。

## 7. 迭代建议

- 与任务中心、日历、通知系统进一步融合，实现跨模块协同。
- 引入条件分支、并行节点、循环节点等高级编排能力。
- 提供流程 A/B 测试功能，对比不同方案的效率与满意度。

