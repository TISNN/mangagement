# AI 助手添加学生功能说明

## 功能概述

现在你可以通过与 AI 助手"小IN"对话，直接添加学生到系统中，无需手动填写表单！

## 使用方法

### 1. 打开 AI 助手
点击页面右下角的蓝色机器人图标 🤖

### 2. 告诉 AI 你要添加学生
可以直接输入，也可以点击对话窗口顶部的“添加学生”快捷按钮，系统会自动为你准备输入框。


你可以用自然语言描述，例如：

**示例 1 - 完整信息**：
```
帮我添加一个学生，叫李明，邮箱是liming@qq.com，电话13912345678，男生，北京大学计算机专业，申请美国本科
```

**示例 2 - 简单信息**：
```
添加学生：张三，邮箱zhangsan@163.com
```

**示例 3 - 批量添加**：
```
录入新学生王芳，她是女生，清华大学经济学专业，想申请英国硕士
```

### 3. AI 自动识别并添加

AI 会：
1. ✅ 识别你的添加学生意图
2. ✅ 引导你补充必要信息（联系方式、服务类型）
3. ✅ 提取学生信息（姓名、邮箱、电话等）
4. ✅ 自动添加到数据库
5. ✅ 返回添加结果

### 4. 查看结果

添加成功后，AI 会显示：
```
✅ 成功添加学生！

📋 学生信息：
• 姓名：李明
• 邮箱：liming@qq.com
• 电话：13912345678
• 性别：男
• 学校：北京大学
• 专业：计算机
• 服务类型：本科申请

学生已成功添加到系统中，您可以在学生管理页面查看详细信息。
```

## 支持的字段

AI 可以识别以下学生信息：

| 字段 | 是否必填 | 示例 |
|------|---------|------|
| 姓名 | ✅ 必填 | 张三、李明 |
| 邮箱 | 可选 | zhangsan@qq.com |
| 电话 | 可选 | 13912345678 |
| 性别 | 可选 | 男、女 |
| 学校 | 可选 | 北京大学 |
| 专业 | 可选 | 计算机科学 |
| 学历 | 可选 | 本科、硕士 |
| 毕业年份 | 可选 | 2024 |
| 服务类型 | 可选 | 本科申请、文书 |

## 智能特性

### 1. 自然语言理解
不需要固定格式，AI 会理解各种表达方式：
- "帮我添加学生XXX"
- "录入新学生XXX"  
- "新增学生XXX到系统"
- "我要添加一个学生叫XXX"

### 2. 智能引导
如果你只提供姓名，AI 会自动：
- 追问联系方式（邮箱或电话）
- 追问服务类型（本科申请、硕士申请、文书等）
- 帮你确认信息是否完整

### 3. 服务类型智能匹配
你可以用自然语言描述服务：
- "申请美国本科" → 自动匹配"本科申请"服务
- "文书指导" → 自动匹配"文书"服务
- "签证辅导" → 自动匹配相关服务

## 技术实现

### 工作流程

```
用户输入 → AI 意图识别 → 提取结构化数据 → 调用 add_student 函数 
          ↓
   验证数据 → 添加到数据库 → 返回结果 → 显示给用户
```

### 核心组件

1. **AI 工具定义** (`api/aiService.ts`)
   - 定义了 `add_student` 工具
   - 指定参数结构和验证规则

2. **功能执行器** (`AIChatAssistant.tsx`)
   - `executeAddStudent` 函数
   - 处理参数转换和数据库操作

3. **数据库服务** (`peopleService`)
   - `upsertStudent` - 创建学生记录
   - `upsertStudentService` - 添加服务关联

## 示例对话

### 场景 1：完整信息添加

```
👤 用户：帮我添加一个学生，叫刘洋，邮箱liuyang@gmail.com，电话18600001234，女生，复旦大学金融专业，想申请英国硕士

🤖 小IN：✅ 成功添加学生！

📋 学生信息：
• 姓名：刘洋
• 邮箱：liuyang@gmail.com
• 电话：18600001234
• 性别：女
• 学校：复旦大学
• 专业：金融
• 服务类型：硕士申请

学生已成功添加到系统中，您可以在学生管理页面查看详细信息。
```

### 场景 2：信息补充

```
👤 用户：添加学生王强

🤖 小IN：好的，我来帮您添加学生王强。请问：
1. 需要为他添加什么服务类型？（例如：本科申请、硕士申请、文书等）
2. 是否有联系方式（邮箱或电话）？

👤 用户：本科申请，邮箱wangqiang@163.com

🤖 小IN：✅ 成功添加学生！
...
```

## 注意事项

1. ⚠️ 姓名是必填字段，联系方式和服务类型也必须明确
2. ⚠️ AI 会在信息不完整时主动追问，确保数据准确
3. ⚠️ 所有添加操作会同步到 Supabase 数据库
4. ✅ 支持在线 AI 模式下使用，本地知识库模式暂不支持
5. ✅ 建议提供更多背景信息，方便后续服务安排

## 未来扩展

可以继续添加更多功能：
- 📝 创建任务
- 📅 创建会议
- 💡 添加线索
- 📊 查询数据
- 📈 生成报告

---

**版本**: 1.1.0  
**更新时间**: 2025-11-08  
**作者**: AI 进化论-花生

