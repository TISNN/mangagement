# 路径别名修复说明 🔧

## ❌ 遇到的问题

```
GET http://localhost:5173/@/lib/utils net::ERR_ABORTED 404 (Not Found)
```

Simple Editor 的组件无法找到 `@/lib/tiptap-utils`。

---

## ✅ 已修复

### 1. 更新 Vite 配置

**文件**: `vite.config.ts`

```typescript
resolve: {
  alias: {
    '@': path.resolve(__dirname, './@'),
    '@/components': path.resolve(__dirname, './@/components'),
    '@/lib': path.resolve(__dirname, './@/lib'),
    '@/hooks': path.resolve(__dirname, './@/hooks'),
    '@/styles': path.resolve(__dirname, './@/styles'),
  },
}
```

### 2. 重启开发服务器

**重要**：修改 Vite 配置后必须重启！

```bash
# 停止当前服务器 (Ctrl+C)
# 然后重新启动
npm run dev
```

---

## 📁 文件结构

Simple Editor 组件安装在特殊的 `@` 目录：

```
项目根目录/
├── @/                          ← Tiptap CLI 创建的目录
│   ├── components/
│   │   ├── tiptap-templates/
│   │   │   └── simple/
│   │   │       └── simple-editor.tsx
│   │   ├── tiptap-ui/
│   │   ├── tiptap-ui-primitive/
│   │   └── tiptap-node/
│   ├── lib/
│   │   └── tiptap-utils.ts    ← 工具函数文件
│   ├── hooks/
│   └── styles/
└── src/                        ← 我们的代码
    ├── components/
    │   └── RichTextEditor/     ← 我们升级的编辑器
    ├── lib/
    └── ...
```

---

## 🎯 解决方案总结

### 问题根源
Tiptap CLI 安装的文件使用 `@/` 路径前缀，需要配置路径别名。

### 解决步骤
1. ✅ 配置 TypeScript (`tsconfig.app.json`)
2. ✅ 配置 Vite (`vite.config.ts`)
3. ✅ 导入样式文件 (`src/index.css`)
4. ⚠️ **需要重启服务器**

---

## 🚀 现在应该可以了

### 刷新浏览器

重启服务器后，刷新浏览器（F5），错误应该消失。

### 如果还有问题

检查开发服务器是否已重启：
```bash
# 确认进程已停止
pkill -f vite

# 重新启动
npm run dev
```

---

## 💡 但是...

### 重要提醒

虽然 Simple Editor 现在可以运行，但它**不支持我们的 `content` 和 `onChange` API**。

#### Simple Editor 的使用方式（独立）
```tsx
import { SimpleEditor } from '@/components/tiptap-templates/simple/simple-editor';

// 只能这样用，无法传入 content 和 onChange
<SimpleEditor />
```

#### 我们需要的方式（受控）
```tsx
<RichTextEditor
  content={content}
  onChange={setContent}  // ← Simple Editor 不支持
/>
```

---

## ✅ 推荐方案

### 继续使用我们升级的 RichTextEditor

```tsx
import RichTextEditor from '../../components/RichTextEditor';

<RichTextEditor
  content={content}
  onChange={setContent}
  placeholder="开始编写..."
  minHeight="400px"
/>
```

**理由**：
- ✅ 完美支持 content 和 onChange
- ✅ 功能完整（下划线、文本对齐等）
- ✅ 已在三个地方稳定使用
- ✅ 代码简洁，易于维护

### Simple Editor 的价值

- ✅ 作为学习参考
- ✅ 查看高级 UI 设计
- ✅ 需要时可借鉴特定功能

---

## 🔧 如果想使用 Simple Editor

### 需要大量修改

1. **修改 simple-editor.tsx** - 添加 props 支持
2. **移除内部状态** - 使用外部传入的 content
3. **添加 onChange 回调** - 通知外部内容变化
4. **测试所有功能** - 确保兼容性

**预计时间**: 2-3 小时

---

## 📝 总结

### 路径问题已解决 ✅
重启服务器后，Simple Editor 可以正常加载。

### 但不建议直接替换 ❌
Simple Editor 需要大量修改才能适配我们的 API。

### 推荐方案 ⭐
**继续使用我们的 RichTextEditor**，功能够用、API 完美、已在生产。

---

**重启服务器后刷新浏览器，错误应该消失！** 🎉

**但建议继续使用我们的 RichTextEditor，它已经很好了！** ✨

